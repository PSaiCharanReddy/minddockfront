.journal-sidebar {
  position: fixed; top: 0; left: 0; /* Opens from LEFT, over the map sidebar */
  width: 350px; height: 100vh;
  background-color: var(--bg-sidebar);
  border-right: 1px solid var(--border-color);
  display: flex; flex-direction: column;
  transform: translateX(-100%);
  transition: transform 0.3s ease-in-out;
  z-index: 120; /* High z-index */
  box-shadow: 4px 0 15px var(--shadow-color);
  color: var(--text-main);
}
.journal-sidebar.open { transform: translateX(0); }

.journal-header {
  padding: 15px; background-color: var(--bg-panel);
  display: flex; justify-content: space-between; align-items: center;
  border-bottom: 1px solid var(--border-color);
}
.journal-header h3 { margin: 0; color: var(--text-main); }

.journal-ai-section { padding: 15px; border-bottom: 1px solid var(--border-color); }
.ai-summary-btn {
  width: 100%; padding: 8px; background: linear-gradient(90deg, #007aff, #00c6ff);
  border: none; border-radius: 6px; color: white; cursor: pointer;
  display: flex; justify-content: center; align-items: center; gap: 8px;
  font-weight: bold;
}
.ai-summary-box {
  margin-top: 10px; padding: 10px; background-color: var(--bg-input);
  border-radius: 6px; font-size: 0.9rem; color: var(--text-main);
  border-left: 3px solid #007aff;
}

.journal-controls {
  display: flex; gap: 10px; padding: 10px 15px;
  background-color: var(--bg-panel); border-bottom: 1px solid var(--border-color);
}
.search-bar {
  flex-grow: 1; display: flex; align-items: center; gap: 5px;
  background-color: var(--bg-input); padding: 5px 10px; border-radius: 6px;
}
.search-bar input {
  background: transparent; border: none; color: var(--text-main); width: 100%; outline: none;
}
.new-note-btn {
  background-color: var(--accent-color); color: white; border: none;
  width: 32px; height: 32px; border-radius: 6px; cursor: pointer;
  display: flex; justify-content: center; align-items: center;
}

.create-note-area { padding: 15px; background-color: var(--bg-input); border-bottom: 1px solid var(--border-color); }
.create-note-area textarea {
  width: 100%; min-height: 100px; background-color: var(--bg-panel);
  border: 1px solid var(--border-color); color: var(--text-main);
  padding: 10px; border-radius: 6px; resize: vertical;
}
.create-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 5px; }

.notes-list { flex-grow: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; }
.note-card {
  background-color: var(--bg-panel); padding: 15px; border-radius: 8px;
  border: 1px solid var(--border-color); position: relative;
}
.note-date { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 5px; }
.note-content { margin: 0; white-space: pre-wrap; line-height: 1.5; font-size: 0.95rem; }
.delete-note-btn {
  position: absolute; top: 10px; right: 10px; background: transparent;
  border: none; color: #ff453a; cursor: pointer; opacity: 0; transition: opacity 0.2s;
}
.note-card:hover .delete-note-btn { opacity: 1; }